services:
  kits-mock:
    image: defradigital/fcp-dal-upstream-mock
    ports:
      - '3100:3100'
    environment:
      MOCK_LOG_LEVEL: info
      MOCK_SERVER_COLLECTION: all
      NODE_ENV: development
      PORT: 3100
    networks:
      - cdp-tenant

  fcp-dal-api:
    build:
      context: .
    ports:
      - '3000:3000'
    environment:
      ALL_SCHEMA_ON: true
      LOG_LEVEL: info
      NODE_ENV: development
      PORT: 3000
      ENVIRONMENT: dev
      DISABLE_AUTH: true
      GRAPHQL_DASHBOARD_ENABLED: true
      DISABLE_PROXY: true
      OIDC_JWKS_URI: unused
      OIDC_JWKS_TIMEOUT_MS: 0
      ADMIN_AD_GROUP_ID: unused
      KITS_GATEWAY_INTERNAL_URL: http://kits-mock:3100/v1/
      KITS_GATEWAY_TIMEOUT_MS: 3000
      KITS_CONNECTION_CERT: unused
      KITS_CONNECTION_KEY: unused
      DAL_REQUEST_TIMEOUT_MS: 3000
      CDP_HTTP_PROXY: unused
      CDP_HTTPS_PROXY: unused

    networks:
      - cdp-tenant

################################################################################

networks:
  cdp-tenant:
    driver: bridge
    name: cdp-tenant
